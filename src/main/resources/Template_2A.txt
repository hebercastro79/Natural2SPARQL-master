# Template 2A: Buscar tickers por nome canônico da empresa

PREFIX : <https://dcm.ffclrp.usp.br/lssb/stock-market-ontology#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

SELECT DISTINCT ?ticker_literal
WHERE {
  # Encontra a URI da Empresa pelo label (case-insensitive, match exato)
  # ASSUMINDO que o nome canônico está em rdfs:label.
  # Se estiver em :nomeEmpresa, troque rdfs:label por :nomeEmpresa
   ?empresa_uri rdfs:label ?nome .
   FILTER (lcase(str(?nome)) = lcase(#ENTIDADE_NOME#)) . # <-- Usa o nome canônico vindo do Python

  # A partir da URI da Empresa, encontra a ligação para o(s) Código(s)
  # ASSUMINDO que a ligação é :temCodigo e o ticker está no :ticker do código.
  # AJUSTE estas duas linhas conforme a estrutura criada em Ontology.java!
   ?empresa_uri :temCodigo ?codigo_uri .
   ?codigo_uri :ticker ?ticker_literal .
}
LIMIT 10 # Boa prática para limitar resultados